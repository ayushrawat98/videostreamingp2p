import{a as V,b as k,c as B}from"./chunk-AM4RRRUJ.js";import{b as U}from"./chunk-62BHFDM7.js";import{b as T}from"./chunk-T3RXLDUH.js";import{e as x}from"./chunk-7RIOYLOS.js";import"./chunk-E32ASDTD.js";import{a as y}from"./chunk-SRPYG2FS.js";import"./chunk-KPA5BWVQ.js";import{c as M,d as f,g as c,i as h}from"./chunk-6XXA7HXI.js";import{Ab as d,Bb as m,H as b,Kb as v,Sb as u,Vb as I,Xb as C,Za as r,_a as n,a as p,ia as _,nb as l,pb as g,ub as s,y as S,zb as a}from"./chunk-RYUPSIHD.js";function A(i,e){i&1&&m(0,"mat-spinner")}function O(i,e){if(i&1&&m(0,"app-videolist",2),i&2){let t=v(2);g("videoList",t.uploadedVideoList)("sortAllowed",!0)("latestFirst",!0)}}function F(i,e){i&1&&(a(0,"p",3),u(1,"No Videos! (\u2022\u02CB _ \u02CA\u2022)"),d())}function D(i,e){if(i&1&&(a(0,"h1",1),u(1),d(),l(2,O,1,3,"app-videolist",2)(3,F,2,0,"p",3),m(4,"br")(5,"br")),i&2){let t=v();r(),I("","@","",t.user.username," videos "),r(),s(t.uploadedVideoList&&t.uploadedVideoList.length>0?2:-1),r(),s(t.uploadedVideoList&&t.uploadedVideoList.length==0?3:-1)}}function E(i,e){i&1&&(a(0,"p",0),u(1,"This user doesn't exist, young lady \u{1F64F}"),d())}var L=class i{constructor(e,t,o,P){this._userService=e;this.router=t;this._matSnackBar=o;this._authService=P}uploadedVideoList;userId;user;loggedIn;loading=!0;ngOnInit(){this.loggedIn=this._authService.loggedIn,this.router.paramMap.subscribe(e=>{this.userId=Number(e.get("UserId")),S([this._userService.getUserVideos(this.userId),this._userService.getUser(this.userId)]).subscribe({next:t=>{this.uploadedVideoList=t[0].map(o=>p({},o)),this.user=t[1],this.loggedIn()&&this.amISubscribed(),this.loading=!1}})})}getVideos(){this._userService.getUserVideos(this.userId).subscribe({next:e=>{this.uploadedVideoList=e.map(t=>p({},t))}})}subscribe(){this._userService.subscribeToUser({UserId:this.userId}).pipe(b(1e3)).subscribe({next:e=>{this._matSnackBar.open(e.message,"OK",{duration:2e3}),this.amISub=e.message=="Subscribed"},error:e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})}})}getUser(){this._userService.getUser(this.userId).subscribe(e=>{this.user=e,this.loggedIn()&&this.amISubscribed()},e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})})}amISub;amISubscribed(){this._userService.amISubscribed(this.user.id).subscribe({next:e=>{this.amISub=e.message=="yes"}})}static \u0275fac=function(t){return new(t||i)(n(y),n(x),n(V),n(U))};static \u0275cmp=_({type:i,selectors:[["app-user"]],standalone:!0,features:[C],decls:4,vars:3,consts:[[1,"center"],[2,"color","darkgray"],[3,"videoList","sortAllowed","latestFirst"],[2,"text-align","center","color","darkgray"]],template:function(t,o){t&1&&(a(0,"div"),l(1,A,1,0,"mat-spinner")(2,D,6,4)(3,E,2,0,"p",0),d()),t&2&&(g("@slideFromTop",void 0),r(),s(o.loading?1:-1),r(),s(!o.loading&&o.user?2:!o.loading&&!o.user?3:-1))},dependencies:[T,B,k],styles:["h1[_ngcontent-%COMP%]{text-align:center;padding:8px}mat-spinner[_ngcontent-%COMP%]{margin:auto;margin-top:40vh}"],data:{animation:[M("slideFromTop",[h(":enter",[c({opacity:0}),f("500ms ease-out",c({opacity:1}))]),h(":leave",[f("300ms ease-in",c({transform:"translateY(-100%)",opacity:0}))])])]}})};export{L as UserComponent};
